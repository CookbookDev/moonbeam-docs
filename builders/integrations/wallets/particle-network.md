---
title: Add Particle Network to a dApp
description: This tutorial shows you how to integrate Particle Network's Wallet-as-a-Service into a dApp built on Moonbeam to enable MPC-based onboarding and full-stack ERC-4337 AA interaction
---

# Particle Network Smart Wallet-as-a-Service


With Particle's Smart Wallet-as-a-Service, developers can curate an unparalleled user experience through modular and customizable EOA/AA embedded wallet components. Using MPC-TSS for key management, Particle can streamline user onboarding via familiar Web2 accountsâ€”such as Google accounts, email addresses, and phone numbers.

Particle supports Moonbeam Mainnet and Testnet through both EOA interactions and native ERC-4337 SimpleAccount implementations facilitating full-stack account abstraction.
  
Specifically, Particle Network's Moonbeam integration is made up of a few components:
- Particle Network Wallet-as-a-Service
	- This is the flagship Wallet-as-a-Service product offered by Particle Network enabling application-embedded wallets powered by MPC-TSS to facilitate a seamless, Web2-like onboarding and interaction experience.
- Particle Network Modular AA Stack
	- Beyond base EOA-centric interaction that happens as default through Particle's Wallet-as-a-Service, Particle also has a native modular AA stack for implementation of ERC-4337 account abstraction on Moonbeam. This means inherent flexibility with the smart account, bundler, and paymaster you use in tandem with Particle's Wallet-as-a-Service when building AA-enabled applications.

Currently, for AA-enabled applications, Moonbeam Mainnet and Testnet are available on Particle Network's Smart Wallet-as-a-Service through utilization of SimpleAccount. Otherwise, Moonbeam is also available directly through the standard EOA-based interface as well.

![Particle Network Smart WaaS map](https://blog.particle.network/content/images/2023/10/graphic-image-2.png)

Let's dive into a step-by-step example of utilizing Particle Network's Smart Wallet-as-a-Service.

## Create an application

To use Particle Network's Smart Wallet-as-a-Service on Moonbeam, you'll need to begin by creating an account on the [Particle Network dashboard](https://dashboard.particle.network) and spinning up an application.

1. Navigate to the Particle Network dashboard, then sign up or log in
![Dashboard login](https://files.readme.io/e385493-image_22_1.png)

2. Once logged in, create a new project
![Project creation](https://files.readme.io/e7f1946-image_23_1.png)

3. Enter the new project and create a new application
![Application creation](https://files.readme.io/aa31038-webapp.png)

4. Finally, copy the project ID, client key, and app ID
![Application dashboard](https://files.readme.io/07d065b-image_24_1.png)

## Install dependencies

To integrate Particle Network within your Moonbeam application, you'll need to install a number of dependencies- the specifics of which depend on whether you intend on purely using the default EOA generated by Particle's Wallet-as-a-Service, or if you intend to leverage an attached smart account.

For both EOA & smart account utilization, install `@particle-network/auth`

```bash
npm install @particle-network/auth

// OR

yarn add @particle-network/auth
```

If you'd like to natively use ERC-4337 account abstraction, also install `@particle-network/aa`

```bash
npm install @particle-network/aa

// OR

yarn add @particle-network/aa
```

## Configure Particle Network

With an application made and dependencies installed, you can move on to configuring `ParticleNetwork` from `@particle-network/auth`, and if applicable, `SmartAccount` from `@particle-network/aa`.

```js
import { ParticleNetwork } from '@particle-network/auth';
import { Moonbeam } from '@particle-network/chains';
import { SmartAccount } from '@particle-network/aa';

// Project ID, client key, and app ID from https://dashboard.particle.network
const config = {
  projectId: process.env.REACT_APP_PROJECT_ID,
  clientKey: process.env.REACT_APP_CLIENT_KEY,
  appId: process.env.REACT_APP_APP_ID,
};

const particle = new ParticleNetwork({
  ...config,
  chainName: Moonbeam.name,
  chainId: Moonbeam.id,
  wallet: { displayWalletEntry: true }
});

// If using ERC-4337 AA
const smartAccount = new SmartAccount(new ParticleProvider(particle.auth), {
  ...config,
  aaOptions: {
    simple: [{ chainId: Moonbeam.id, version: '1.0.0' }] // Uses SimpleAccount
  }
});
```
At this point, you've signed up and created an application, installed all required dependencies, and configured `ParticleNetwork`, along with `SmartAccount` if applicable.

## Example of utilization

With the aforementioned established, Particle Network can be used similarly to as is shown in the example application below.

Specifically, this application creates a smart account on Moonbeam Mainnet through social login, then uses it to send a test transaction of 0.001 GLMR.

```js
import React, { useState, useEffect } from 'react';
import { ParticleNetwork } from '@particle-network/auth';
import { ParticleProvider } from '@particle-network/provider';
import { Moonbeam } from '@particle-network/chains';
import { AAWrapProvider, SmartAccount } from '@particle-network/aa';
import { ethers } from 'ethers';

// Retrieved from the Particle Network dashboard
const config = {
  projectId: process.env.REACT_APP_PROJECT_ID,
  clientKey: process.env.REACT_APP_CLIENT_KEY,
  appId: process.env.REACT_APP_APP_ID,
};

// Core configuration
const particle = new ParticleNetwork({
  ...config,
  chainName: Moonbeam.name,
  chainId: Moonbeam.id,
  wallet: { displayWalletEntry: true }
});

// ERC-4337 AA configuration
const smartAccount = new SmartAccount(new ParticleProvider(particle.auth), {
  ...config,
  aaOptions: {
    simple: [{ chainId: Moonbeam.id, version: '1.0.0' }]
  }
});

// Uses custom EIP-1193 AA provider
const customProvider = new ethers.providers.Web3Provider(new AAWrapProvider(smartAccount), "any");

// Sets wallet UI to use AA mode
particle.setERC4337({
  name: 'SIMPLE',
  version: '1.0.0'
});

const App = () => {
  const [userInfo, setUserInfo] = useState(null);
  const [balance, setBalance] = useState(null);

  useEffect(() => {
    if (userInfo) {
      fetchBalance();
    }
  }, [userInfo]);

  const fetchBalance = async () => {
    const address = await smartAccount.getAddress();
    const balance = await customProvider.getBalance(address);
    setBalance(ethers.utils.formatEther(balance));
  };

  const handleLogin = async (preferredAuthType) => {
    const user = !particle.auth.isLogin() ? await particle.auth.login({preferredAuthType}) : particle.auth.getUserInfo();
    setUserInfo(user);
  }

  // Sample burn transaction
  const executeUserOp = async () => {
    const signer = customProvider.getSigner();
    const tx = {
      to: "0x000000000000000000000000000000000000dEaD",
      value: ethers.utils.parseEther("0.001"),
    };
    const txResponse = await signer.sendTransaction(tx);
    const txReceipt = await txResponse.wait();
    console.log('Transaction hash:', txReceipt.transactionHash);
  };

  return (
    <div className="App">
      {!userInfo ? (
        <div>
          <button onClick={() => handleLogin('google')}>Sign in with Google</button>
          <button onClick={() => handleLogin('twitter')}>Sign in with Twitter</button>
        </div>
      ) : (
        <div>
          <h2>{userInfo.name}</h2>
          <div>
            <small>{balance}</small>
            <button onClick={executeUserOp}>Execute User Operation</button>
          </div>
        </div>
      )}
    </div>
  );
};

export default App;
```

The full demo repository containing the above code can be found [here](https://github.com/TABASCOatw/particle-moonbeam-demo). Additionally, Particle Network's documentation can be found [here](https://docs.particle.network).
